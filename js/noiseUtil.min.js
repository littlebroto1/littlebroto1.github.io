var constrain=function(n,e,r){return Math.max(Math.min(n,r),e)},map=function(n,e,r,l,t,i){const o=(n-e)/(r-e)*(t-l)+l;return i?l<t?constrain(o,l,t):constrain(o,t,l):o};const PERLIN_YWRAPB=4,PERLIN_YWRAP=16,PERLIN_ZWRAPB=8,PERLIN_ZWRAP=256,PERLIN_SIZE=4095;let perlin_octaves=4,perlin_amp_falloff=.5;const scaled_cosine=n=>.5*(1-Math.cos(n*Math.PI));let perlin;var noise=function(n,e=0,r=0){if(null==perlin){perlin=new Array(4096);for(let n=0;n<4096;n++)perlin[n]=Math.random()}n<0&&(n=-n),e<0&&(e=-e),r<0&&(r=-r);let l,t,i,o,a,c=Math.floor(n),s=Math.floor(e),p=Math.floor(r),f=n-c,_=e-s,d=r-p,u=0,P=.5;for(let n=0;n<perlin_octaves;n++){let n=c+(s<<4)+(p<<8);l=scaled_cosine(f),t=scaled_cosine(_),i=perlin[4095&n],i+=l*(perlin[n+1&4095]-i),o=perlin[n+16&4095],i+=t*((o+=l*(perlin[n+16+1&4095]-o))-i),o=perlin[4095&(n+=256)],o+=l*(perlin[n+1&4095]-o),a=perlin[n+16&4095],o+=t*((a+=l*(perlin[n+16+1&4095]-a))-o),u+=(i+=scaled_cosine(d)*(o-i))*P,P*=perlin_amp_falloff,c<<=1,s<<=1,p<<=1,(f*=2)>=1&&(c++,f--),(_*=2)>=1&&(s++,_--),(d*=2)>=1&&(p++,d--)}return u},noiseDetail=function(n,e){n>0&&(perlin_octaves=n),e>0&&(perlin_amp_falloff=e)},noiseSeed=function(n){const e=(()=>{const n=4294967296;let e,r;return{setSeed(l){r=e=(null==l?Math.random()*n:l)>>>0},getSeed:()=>e,rand:()=>(r=(1664525*r+1013904223)%n)/n}})();e.setSeed(n),perlin=new Array(4096);for(let n=0;n<4096;n++)perlin[n]=e.rand()};