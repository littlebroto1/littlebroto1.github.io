var perlin,constrain=function(n,e,r){return Math.max(Math.min(n,r),e)},map=function(n,e,r,l,I,P){const E=(n-e)/(r-e)*(I-l)+l;return P?l<I?constrain(E,l,I):constrain(E,I,l):E},PERLIN_YWRAPB=4,PERLIN_YWRAP=1<<PERLIN_YWRAPB,PERLIN_ZWRAPB=8,PERLIN_ZWRAP=1<<PERLIN_ZWRAPB,PERLIN_SIZE=4095,perlin_octaves=4,perlin_amp_falloff=.5,scaled_cosine=n=>.5*(1-Math.cos(n*Math.PI)),noise=function(n,e=0,r=0){if(null==perlin){perlin=new Array(PERLIN_SIZE+1);for(let n=0;n<PERLIN_SIZE+1;n++)perlin[n]=Math.random()}n<0&&(n=-n),e<0&&(e=-e),r<0&&(r=-r);let l,I,P,E,R,_=Math.floor(n),i=Math.floor(e),t=Math.floor(r),o=n-_,a=e-i,L=r-t,N=0,p=.5;for(let n=0;n<perlin_octaves;n++){let n=_+(i<<PERLIN_YWRAPB)+(t<<PERLIN_ZWRAPB);l=scaled_cosine(o),I=scaled_cosine(a),P=perlin[n&PERLIN_SIZE],P+=l*(perlin[n+1&PERLIN_SIZE]-P),E=perlin[n+PERLIN_YWRAP&PERLIN_SIZE],P+=I*((E+=l*(perlin[n+PERLIN_YWRAP+1&PERLIN_SIZE]-E))-P),E=perlin[(n+=PERLIN_ZWRAP)&PERLIN_SIZE],E+=l*(perlin[n+1&PERLIN_SIZE]-E),R=perlin[n+PERLIN_YWRAP&PERLIN_SIZE],E+=I*((R+=l*(perlin[n+PERLIN_YWRAP+1&PERLIN_SIZE]-R))-E),N+=(P+=scaled_cosine(L)*(E-P))*p,p*=perlin_amp_falloff,_<<=1,i<<=1,t<<=1,(o*=2)>=1&&(_++,o--),(a*=2)>=1&&(i++,a--),(L*=2)>=1&&(t++,L--)}return N},noiseDetail=function(n,e){n>0&&(perlin_octaves=n),e>0&&(perlin_amp_falloff=e)},noiseSeed=function(n){const e=(()=>{const n=4294967296;let e,r;return{setSeed(l){r=e=(null==l?Math.random()*n:l)>>>0},getSeed:()=>e,rand:()=>(r=(1664525*r+1013904223)%n)/n}})();e.setSeed(n),perlin=new Array(PERLIN_SIZE+1);for(let n=0;n<PERLIN_SIZE+1;n++)perlin[n]=e.rand()};